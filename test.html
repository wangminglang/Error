<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<title>slideUpDownRefresh</title>
<link rel="stylesheet" type="text/css" href = "css/iScroll.css">
</head>
<body>
<div id="wrapper" class="frame-content">
	<div class="scroll">
		<div class="pull-down frame-scroll-down-ele">
			<div class="bgAnimation-down"></div>
		</div>
		<div>
			<ul id="thelist">
				<li>Pretty row 1</li>
				<li>Pretty row 2</li>
				<li>Pretty row 3</li>
				<li>Pretty row 4</li>
				<li>Pretty row 5</li>
				<li>Pretty row 6</li>
				<li>Pretty row 7</li>
				<li>Pretty row 8</li>
				<li>Pretty row 9</li>
				<li>Pretty row 10</li>
				<li>Pretty row 11</li>
				<li>Pretty row 12</li>
				<li>Pretty row 13</li>
				<li>Pretty row 14</li>
				<li>Pretty row 15</li>
				<li>Pretty row 16</li>
				<li>Pretty row 17</li>
				<li>Pretty row 18</li>
				<li>Pretty row 19</li>
				<li>Pretty row 20</li>
				<li>Pretty row 21</li>
				<li>Pretty row 22</li>
				<li>Pretty row 23</li>
				<li>Pretty row 24</li>
				<li>Pretty row 25</li>
				<li>Pretty row 26</li>
				<li>Pretty row 27</li>
				<li>Pretty row 28</li>
				<li>Pretty row 29</li>
				<li>Pretty row 30</li>
			</ul>
		</div>
		<div class="pull-up frame-scroll-up-ele">
			<div class="bgAnimation-up"></div>
		</div>
	</div>
</div>
</body>
<script src="js/zepto.js"></script>
<script src="js/iscroll.js"></script>
<script src="js/XMSScrollFrame.js"></script>
<script type="text/javascript">
	var generatedCount=0;

//框架的结构计算。
	xmsCore.xmsFrameInit();

	
	var scrollFrime = xmsCore.XMSScrollFrame("#wrapper",{
		mouseWheel: true,
		downFn:_downFn,
		upFn:_upFn
	});

	// scrollFrime.myScroll.on("scroll",function(){
	// 	var y = this.y,
	// 		maxY = this.maxScrollY - y;
	// 		console.log(maxY);

	// 	if (y > 0) {
	// 		$(".bgAnimation-down").addClass("animation");
	// 	}

	// 	if (maxY > 0) {
	// 		$(".bgAnimation-up").addClass("animation");
	// 	}
	// });
	
	function _downFn(){
		$(".bgAnimation-down").addClass("animation");
		setTimeout(function(){
			var el, li, i;
			el = document.getElementById('thelist');
			for (i=0; i<3; i++) {
				li = document.createElement('li');
				li.innerText = 'Generated row ' + (++generatedCount);
				el.insertBefore(li, el.childNodes[0]);
			}
			scrollFrime.downSucc();
			$(".bgAnimation-down").removeClass("animation");
		},1000);
	}
	
	function _upFn(){
		$(".bgAnimation-up").addClass("animation");
		setTimeout(function(){
			var el, li, i;
			el = document.getElementById('thelist');

			for (i=0; i<3; i++) {
				li = document.createElement('li');
				li.innerText = 'Generated row ' + (++generatedCount);
				el.appendChild(li, el.childNodes[0]);
			}
			scrollFrime.upSucc();
			$(".bgAnimation-up").removeClass("animation");
		},1000);
	}

</script>
</html>